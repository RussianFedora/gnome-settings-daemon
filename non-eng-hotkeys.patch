diff -rupN gnome-settings-daemon-3.8.4.orig/plugins/keyboard/gsd-keyboard-manager.c gnome-settings-daemon-3.8.4/plugins/keyboard/gsd-keyboard-manager.c
--- gnome-settings-daemon-3.8.4.orig/plugins/keyboard/gsd-keyboard-manager.c	2013-07-19 20:07:29.000000000 +0400
+++ gnome-settings-daemon-3.8.4/plugins/keyboard/gsd-keyboard-manager.c	2013-09-17 13:58:51.856666500 +0400
@@ -148,6 +148,8 @@ static const gchar introspection_xml[] =
 
 static gpointer manager_object = NULL;
 
+static guint group_position = 0;
+
 static void
 init_builder_with_sources (GVariantBuilder *builder,
                            GSettings       *settings)
@@ -692,11 +694,6 @@ upload_xkb_description (const gchar
         XkbDescRec *xkb_desc;
         gchar *rules_file;
 
-        /* The layout we want is always in the first XKB group index
-         * so we should enforce it to make sure we never end up with
-         * the wrong one. */
-        XkbLockGroup (display, XkbUseCoreKbd, 0);
-
         /* Upload it to the X server using the same method as setxkbmap */
         xkb_desc = XkbGetKeyboardByName (display,
                                          XkbUseCoreKbd,
@@ -711,6 +708,10 @@ upload_xkb_description (const gchar
 
         XkbFreeKeyboard (xkb_desc, 0, True);
 
+        /* The index of layout we want is saved in the group_position
+         * variable. */
+        XkbLockGroup (display, XkbUseCoreKbd, group_position);
+
         rules_file = g_path_get_basename (rules_file_path);
 
         if (!XkbRF_SetNamesProp (display, rules_file, var_defs))
@@ -742,14 +743,22 @@ build_xkb_group_string (const gchar *use
 
         string = malloc (length);
 
-        if (locale && latin)
-                sprintf (string, "%s,%s,%s", user, locale, latin);
-        else if (locale)
+        if (locale && latin) {
+                sprintf (string, "%s,%s,%s", latin, locale, user);
+                group_position = 2;
+        } else if (locale && g_strcmp0(locale, "us") == 0) {
+                sprintf (string, "%s,%s", locale, user);
+                group_position = 1;
+        } else if (locale && g_strcmp0(locale, "us") != 0) {
                 sprintf (string, "%s,%s", user, locale);
-        else if (latin)
-                sprintf (string, "%s,%s", user, latin);
-        else
+                group_position = 0;
+        } else if (latin) {
+                sprintf (string, "%s,%s", latin, user);
+                group_position = 1;
+        } else {
                 sprintf (string, "%s", user);
+                group_position = 0;
+        }
 
         return string;
 }
